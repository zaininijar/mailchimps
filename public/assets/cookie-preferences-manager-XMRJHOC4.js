import{l as o}from"/release/e/chunks/chunk-GTGSP3XW.js";var u=class{constructor(){o(this,"config",{intuitCookie:"cpra",oneTrustCookie:"OptanonConsent",oneTrustBannerCookie:"OptanonAlertBoxClosed"});o(this,"categoryEnabled","1");o(this,"categoryDisabled","0");o(this,"oneTrustCategories",{essential:"1",advertising:"4"});o(this,"intuitToOnetrustMap",{strictly_necessary_permission:this.oneTrustCategories.essential,advertising_permission:this.oneTrustCategories.advertising});o(this,"oneTrustPreferences",{});o(this,"intuitPreferences",{});window.mailchimp_cookie_preferences=window.mailchimp_cookie_preferences||{},window.mailchimp_cookie_preferences.syncPreferences=()=>{this.syncPreferences()}}static isCPRARegion(t,e){return t===u.region.countryCode&&e===u.region.regionCode}static initializeCPRA(t){let e=new u,n=u.getCookieValue(e.config.intuitCookie),i=u.getCookieValue(e.config.oneTrustCookie),r=u.getCookieValue(e.config.oneTrustBannerCookie);typeof i!="undefined"&&e.getOneTrustPreferences(i);let s=typeof n!="undefined";s&&typeof r=="undefined"&&e.supressBanner(t),s&&(e.getintuitPreferences(n),e.copyCookiePreferences(n,i,t))}reportError(t,e){typeof window.bugsnagClient!="undefined"&&typeof window.bugsnagClient.notify=="function"&&window.bugsnagClient.notify(t,n=>{n.addMetadata("context",e)})}extractActiveGroupsValues(t){return this.isolateOneTrustGroups(t).reduce((n,i)=>{let r=i.split(":");return n[r[0]]=r[1],n},{})}getOneTrustPreferences(t){return Object.keys(this.getOneTrustPreferences).length===0&&(this.oneTrustPreferences=this.extractActiveGroupsValues(t)),this.oneTrustPreferences}isolateOneTrustGroups(t){let e=t.split("groups=")[1];return typeof e=="undefined"?[]:e.split("&")[0].split(",")}static insertScript(t,e){let n=document.createElement("script");return n.src=t,e&&n.setAttribute("data-domain-script",e),document.body.appendChild(n),n.outerHTML}getintuitPreferences(t){let e=t.split("|");return this.intuitPreferences[this.intuitToOnetrustMap.strictly_necessary_permission]=e[0],this.intuitPreferences[this.intuitToOnetrustMap.advertising_permission]=e[1],this.intuitPreferences}copyCookiePreferences(t,e,n){let i=typeof e!="undefined";if(typeof t!="undefined"){if(!i){let r="groups=1:1,2:0,3:0,4:0&isGpcEnabled=0";this.updatePreferences(t,r,n)}if(i&&e.includes("groups")===!1){let r=e+"&"+decodeURIComponent("groups=1%3A1%2C2%3A0%2C3%3A0%2C4%3A0");this.updatePreferences(t,r,n)}i&&this.isAdvertisingDifferent()&&this.updatePreferences(t,e,n)}}updatePreferences(t,e,n){let i=this.isolateOneTrustGroups(e);t.split("|").forEach((s,f)=>{switch(f){case 0:i[0]=`${this.oneTrustCategories.essential}:${s}`;break;case 1:i[3]=`${this.oneTrustCategories.advertising}:${s}`,this.oneTrustPreferences[this.oneTrustCategories.advertising]=s;break;default:}});let r=e.replace(/(groups=)[^&]+/,"$1"+i);if(n){let s=new Date;s.setFullYear(s.getFullYear()+1),this.setCookie(this.config.oneTrustCookie,r,{domain:`.${n}; Samesite=Lax; secure`,expires:s})}else this.setCookie(this.config.oneTrustCookie,r);return r}static getCookieValue(t){let n=`${document.cookie}`.split(`${t}=`);if(n.length===2)return decodeURIComponent(n.pop().split(";").shift())}encodeCookie(t,e){let n=encodeURIComponent(","),i=encodeURIComponent(":"),r=new u;return(t===r.config.oneTrustCookie||t===r.config.oneTrustBannerCookie)&&(e=e.replace(/,/g,n).replace(/:/g,i)),t+"="+e}setCookie(t,e,{path:n="/",expires:i,domain:r}={}){let s=this.encodeCookie(t,e);return typeof n=="string"&&(s+=`;path=${n}`),i!==void 0&&typeof i.getMonth=="function"&&(s+=`;expires=${i}`),typeof r=="string"&&(s+=`;domain=${r}`),document.cookie=s,s}supressBanner(t,e=null,n=null){if(e===null&&(e=new Date().toISOString()),n===null){let i=new Date;i.setFullYear(i.getFullYear()+1),this.setCookie(this.config.oneTrustBannerCookie,e,{domain:`${t}; Samesite=Lax; secure`,expires:i})}else n();return e}getLawConfig(t){try{return window.intuit_gdpr.util.getLawConfig(t)}catch(e){return this.reportError("Unable to get law config",{error:e,hasGdprUtil:typeof window.intuit_gdpr!="undefined"}),{}}}setUserConsent(t,e,n){try{window.intuit_gdpr.util.setUserConsent(t,e,()=>{},i=>{this.reportError("Unable to sync consent",{failedEndpoints:i})},n)}catch(i){this.reportError("Unable to set user consent",{error:i,endponts:t,preferences:e,law:n,hasGdprUtil:typeof window.intuit_gdpr!="undefined"})}}mapOneTrustToIntuitPreferences(t,e=null){return e===null&&(e=window.OptanonActiveGroups),t.checkboxes.reduce((n,i)=>{let r=i.value,s=this.intuitToOnetrustMap[r];return s===this.oneTrustCategories.essential?(n[i.value]=!0,n):(n[i.value]=e.includes(s),n)},{})}isAdvertisingDifferent(){let t=this.oneTrustPreferences[this.oneTrustCategories.advertising],e=this.intuitPreferences[this.intuitToOnetrustMap.advertising_permission];return t!==e}shouldSyncPreferences(t=null){t===null&&(t=window.OptanonActiveGroups);let e=this.intuitPreferences[this.intuitToOnetrustMap.advertising_permission];if(typeof e=="undefined")return!0;let n=t.includes(this.oneTrustCategories.advertising);return e===this.categoryDisabled&&n===!0||e===this.categoryEnabled&&n===!1}syncPreferences(){if(this.shouldSyncPreferences()===!0){let t=this.getLawConfig(this.config.intuitCookie);if(Object.keys(t).length===0)return;let e=this.mapOneTrustToIntuitPreferences(t);this.setUserConsent(t.endpoints,e,this.config.intuitCookie)}}},d=u;o(d,"region",{countryCode:"US",regionCode:"CA"});var c=d;(()=>{let a=document.querySelector('script[data-id="cookie-preferences-manager"]'),t=a.getAttribute("data-country-code"),e=a.getAttribute("data-region-code"),n=a.getAttribute("data-domain-script"),i=c.getCookieValue("MC_GEO_OVERRIDE");if(c.isCPRARegion(t,e)||i==="US|CA"){let r=a.getAttribute("data-host-name");c.initializeCPRA(r)}c.insertScript("https://cdn.cookielaw.org/scripttemplates/otSDKStub.js",n)})();
//# sourceMappingURL=/release/e/cookie-preferences-manager-XMRJHOC4.js.map
