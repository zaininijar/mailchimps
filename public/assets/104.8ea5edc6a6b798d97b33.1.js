(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{330:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var a=n(5),o=n(7),c=n(6),i=n(2),s=n(11),r=n(38);function u(t){if(t.length>27){var e=t.substring(0,27);return"".concat(e,"â€¦")}return t}n(35);var l=function(){function t(){var e=this;Object(a.a)(this,t),Object(c.a)(this,"handleEscapeKeydown",(function(t){Object(s.b)(t).is(s.a.Escape)&&(t.preventDefault(),e.closePanel())})),this.hostNode=document.querySelector(".iaGlobalNav"),this.elements={accountLogin:this.hostNode.querySelectorAll("[data-behavior='iaNav:login']"),accountSignup:this.hostNode.querySelectorAll("[data-behavior='iaNav:signup']"),accountAvatar:this.hostNode.querySelectorAll("[data-behavior='account-nav:avatar']"),accountName:this.hostNode.querySelectorAll("[data-behavior='account-nav:name']"),salutation:this.hostNode.querySelectorAll("[data-behavior='account-nav:salutation']"),accountOrganization:this.hostNode.querySelectorAll("[data-behavior='account-nav:organization']"),accountLinks:this.hostNode.querySelectorAll("[data-behavior^='account-nav-link']"),accountDropdown:this.hostNode.querySelector("[data-behavior='account-nav:dropdown']"),accountNavContainer:this.hostNode.querySelector('[data-account-nav-element="container"]'),accountNavSidebarContainer:this.hostNode.querySelector('[data-account-nav-element="sidebarContainer"]'),accountNavControl:this.hostNode.querySelector("[data-behavior='account-nav:control']")},this.options={hiddenClass:"is-hidden"},this.classes={acctIsOpen:"is-open",moveBack:"move-back"},this.state={isOpen:!1}}return Object(o.a)(t,[{key:"initialize",value:function(){var t=this,e=this.elements,n=e.accountNavControl,a=e.accountNavContainer,o=e.accountDropdown;this.showUserActions(),o&&(document.addEventListener("focusin",(function(e){!t.state.isOpen||null!=a&&a.contains(e.target)||t.closePanel()})),n.addEventListener("click",(function(){t.state.isOpen?t.closePanel():t.openPanel()})))}},{key:"showUserActions",value:function(){var t=this.elements,e=t.accountLogin,n=t.accountNavContainer,a=t.accountNavSidebarContainer,o=t.accountSignup,c=this.options.hiddenClass,s=Object(i.q)();s&&(this.updateUserMenu(s),Object(i.v)([n,a],c),Object(i.a)(e,c),Object(i.a)(o,c))}},{key:"updateUserMenu",value:function(t){var e=this.elements,n=e.accountAvatar,a=e.accountName,o=e.accountOrganization,c=e.accountLinks,s=e.salutation;n.forEach((function(e){e.style.backgroundImage="url('".concat(t.avatar,"')")})),s.forEach((function(e){var n=e.innerText;e.innerText=u(n.replace("%s",t.firstname).trim())})),a.forEach((function(e){e.innerText=u(t.firstname)})),o.forEach((function(e){e.innerHTML="".concat(t.accountname)})),c.forEach((function(e){e.href=Object(i.B)(t.dc,e.pathname+e.search)}))}},{key:"openPanel",value:function(){var t=this;if(!this.state.isOpen){document.addEventListener("keydown",this.handleEscapeKeydown),this.state.isOpen=!0,this.elements.accountDropdown.hidden=!1;var e=this.elements.accountDropdown.querySelector("h3");setTimeout((function(){Object(r.b)(t.elements.accountNavControl),e.focus({preventScroll:!0})}),10)}}},{key:"closePanel",value:function(){if(this.state.isOpen){var t=this.elements,e=t.accountNavControl,n=t.accountDropdown;document.removeEventListener("keydown",this.handleEscapeKeydown),this.state.isOpen=!1,Object(r.a)(e),e.focus({preventScroll:!0}),setTimeout((function(){n.hidden=!0}),200)}}}]),t}()}}]);
//# sourceMappingURL=104.8ea5edc6a6b798d97b33.1.js.map